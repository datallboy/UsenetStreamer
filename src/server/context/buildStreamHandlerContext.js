function buildStreamHandlerContext({
  runtime,
  services,
  helpers,
}) {
  return {
    ensureAddonConfigured: helpers.ensureAddonConfigured,
    INDEXER_MANAGER: runtime.INDEXER_MANAGER,
    INDEXER_MANAGER_LABEL: runtime.INDEXER_MANAGER_LABEL,
    INDEXER_MANAGER_URL: runtime.INDEXER_MANAGER_URL,
    indexerService: services.indexerService,
    STREAMING_MODE: runtime.STREAMING_MODE,
    nzbdavService: services.nzbdavService,
    triggerRequestTriagePrewarm: helpers.triggerRequestTriagePrewarm,
    tmdbService: services.tmdbService,
    tvdbService: services.tvdbService,
    NZBDAV_HISTORY_CATALOG_LIMIT: runtime.NZBDAV_HISTORY_CATALOG_LIMIT,
    ADDON_SHARED_SECRET: runtime.ADDON_SHARED_SECRET,
    ADDON_BASE_URL: runtime.ADDON_BASE_URL,
    encodeStreamParams: helpers.encodeStreamParams,
    cache: services.cache,
    STREAM_CACHE_MAX_ENTRIES: helpers.STREAM_CACHE_MAX_ENTRIES,
    buildStreamCacheKey: helpers.buildStreamCacheKey,
    restoreTriageDecisions: helpers.restoreTriageDecisions,
    isTriageFinalStatus: helpers.isTriageFinalStatus,
    restoreFinalNzbResults: helpers.restoreFinalNzbResults,
    dedupeResultsByTitle: helpers.dedupeResultsByTitle,
    buildTriageTitleMap: helpers.buildTriageTitleMap,
    extractTriageOverrides: helpers.extractTriageOverrides,
    INDEXER_DEDUP_ENABLED: runtime.INDEXER_DEDUP_ENABLED,
    specialMetadata: services.specialMetadata,
    CINEMETA_URL: helpers.CINEMETA_URL,
    axios: services.axios,
    INDEXER_MANAGER_STRICT_ID_MATCH: runtime.INDEXER_MANAGER_STRICT_ID_MATCH,
    easynewsService: services.easynewsService,
    sanitizeStrictSearchPhrase: helpers.sanitizeStrictSearchPhrase,
    parseReleaseMetadata: helpers.parseReleaseMetadata,
    matchesStrictSearch: helpers.matchesStrictSearch,
    annotateNzbResult: helpers.annotateNzbResult,
    executeManagerPlanWithBackoff: helpers.executeManagerPlanWithBackoff,
    executeNewznabPlan: helpers.executeNewznabPlan,
    INDEXER_LOG_PREFIX: runtime.INDEXER_LOG_PREFIX,
    NEWZNAB_LOG_PREFIX: helpers.NEWZNAB_LOG_PREFIX,
    INDEXER_MANAGER_INDEXERS: runtime.INDEXER_MANAGER_INDEXERS,
    resolvePreferredLanguages: helpers.resolvePreferredLanguages,
    INDEXER_PREFERRED_LANGUAGES: runtime.INDEXER_PREFERRED_LANGUAGES,
    INDEXER_SORT_MODE: runtime.INDEXER_SORT_MODE,
    prepareSortedResults: helpers.prepareSortedResults,
    RELEASE_EXCLUSIONS: runtime.RELEASE_EXCLUSIONS,
    ALLOWED_RESOLUTIONS: runtime.ALLOWED_RESOLUTIONS,
    RESOLUTION_LIMIT_PER_QUALITY: runtime.RESOLUTION_LIMIT_PER_QUALITY,
    getPreferredLanguageMatches: helpers.getPreferredLanguageMatches,
    resolveLanguageLabels: helpers.resolveLanguageLabels,
    resolveLanguageLabel: helpers.resolveLanguageLabel,
    formatResolutionBadge: helpers.formatResolutionBadge,
    extractQualityFeatureBadges: helpers.extractQualityFeatureBadges,
    QUALITY_FEATURE_PATTERNS: helpers.QUALITY_FEATURE_PATTERNS,
    TRIAGE_FINAL_STATUSES: helpers.TRIAGE_FINAL_STATUSES,
    TRIAGE_PRIORITY_INDEXERS: runtime.TRIAGE_PRIORITY_INDEXERS,
    TRIAGE_HEALTH_INDEXERS: runtime.TRIAGE_HEALTH_INDEXERS,
    TRIAGE_SERIALIZED_INDEXERS: runtime.TRIAGE_SERIALIZED_INDEXERS,
    TRIAGE_MAX_CANDIDATES: runtime.TRIAGE_MAX_CANDIDATES,
    buildCombinedLimitMap: helpers.buildCombinedLimitMap,
    normalizeIndexerToken: helpers.normalizeIndexerToken,
    normalizeResolutionToken: helpers.normalizeResolutionToken,
    prioritizeTriageCandidates: helpers.prioritizeTriageCandidates,
    TRIAGE_ENABLED: runtime.TRIAGE_ENABLED,
    TRIAGE_NNTP_CONFIG: runtime.TRIAGE_NNTP_CONFIG,
    TRIAGE_TIME_BUDGET_MS: runtime.TRIAGE_TIME_BUDGET_MS,
    TRIAGE_BASE_OPTIONS: runtime.TRIAGE_BASE_OPTIONS,
    triageAndRank: helpers.triageAndRank,
    triageDecisionsMatchStatuses: helpers.triageDecisionsMatchStatuses,
    sanitizeDecisionForCache: helpers.sanitizeDecisionForCache,
    serializeFinalNzbResults: helpers.serializeFinalNzbResults,
    TRIAGE_PREFETCH_FIRST_VERIFIED: runtime.TRIAGE_PREFETCH_FIRST_VERIFIED,
    prefetchTracker: helpers.prefetchTracker,
    normalizeReleaseTitle: helpers.normalizeReleaseTitle,
    nzbMatchesIndexer: helpers.nzbMatchesIndexer,
    INDEXER_HIDE_BLOCKED_RESULTS: runtime.INDEXER_HIDE_BLOCKED_RESULTS,
    ACTIVE_NEWZNAB_CONFIGS: runtime.ACTIVE_NEWZNAB_CONFIGS,
    INDEXER_MAX_RESULT_SIZE_BYTES: runtime.INDEXER_MAX_RESULT_SIZE_BYTES,
    RELEASE_BLOCKLIST_REGEX: runtime.RELEASE_BLOCKLIST_REGEX,
    inferMimeType: helpers.inferMimeType,
    formatStreamTitle: helpers.formatStreamTitle,
    NZB_NAMING_PATTERN: runtime.NZB_NAMING_PATTERN,
    NZB_DISPLAY_NAME_PATTERN: runtime.NZB_DISPLAY_NAME_PATTERN,
    DEFAULT_ADDON_NAME: helpers.DEFAULT_ADDON_NAME,
    ADDON_NAME: runtime.ADDON_NAME,
    buildNntpServersArray: helpers.buildNntpServersArray,
    resolvePrefetchedNzbdavJob: helpers.resolvePrefetchedNzbdavJob,
    parseRequestedEpisode: helpers.parseRequestedEpisode,
    toBoolean: helpers.toBoolean,
    isNzDebugEnabled: helpers.isNzDebugEnabled,
    getNewznabDebugFlags: helpers.getNewznabDebugFlags,
    getPaidDirectIndexerTokens: helpers.getPaidDirectIndexerTokens,
  };
}

module.exports = {
  buildStreamHandlerContext,
};
